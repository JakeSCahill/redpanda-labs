[
  {
    "result": "FAIL",
    "app": "firefox",
    "platform": "mac",
    "steps": [
      {
        "exitCode": 0,
        "stdout": "2.4.5",
        "stderr": "",
        "result": "PASS",
        "resultDescription": "Executed command.",
        "action": "runShell",
        "command": "node ../../setup-tests/redpanda-versions/fetch-console.js",
        "setVariables": [
          {
            "name": "REDPANDA_CONSOLE_VERSION",
            "regex": ".*"
          }
        ],
        "id": "811e90d0-266a-4b54-875e-4fca96bf420e",
        "args": [],
        "exitCodes": [
          0
        ]
      },
      {
        "exitCode": 0,
        "stdout": "23.3.9",
        "stderr": "",
        "result": "PASS",
        "resultDescription": "Executed command.",
        "action": "runShell",
        "command": "node ../../setup-tests/redpanda-versions/fetch-redpanda.js",
        "setVariables": [
          {
            "name": "REDPANDA_VERSION",
            "regex": ".*"
          }
        ],
        "id": "35417a08-713d-440e-a8b6-136f76308764",
        "args": [],
        "exitCodes": [
          0
        ]
      },
      {
        "exitCode": 0,
        "stdout": "rpk is already installed. Version information:\nVersion:     v23.3.5\nGit ref:     2c0d4bcfb1\nBuild date:  2024-02-09T04:35:48Z\nOS/Arch:     darwin/arm64\nGo version:  go1.21.3\n\nRedpanda Cluster\n  Unreachable, to debug, use the '-v' flag. To get the broker versions, pass the\n  hosts via flags, profile, or environment variables:\n    rpk version -X admin.hosts=<host address>",
        "stderr": "",
        "result": "PASS",
        "resultDescription": "Executed command.",
        "action": "runShell",
        "command": "sh ../../setup-tests/tools/install-rpk.sh",
        "id": "9a74375e-cf00-4607-9a0c-11c6221f879f",
        "args": [],
        "exitCodes": [
          0
        ],
        "setVariables": []
      },
      {
        "exitCode": 0,
        "stdout": "23.3.9",
        "stderr": "",
        "result": "PASS",
        "resultDescription": "Executed command.",
        "action": "runShell",
        "command": "echo 23.3.9",
        "id": "e70121a6-2f14-43a2-86e0-b211206cb88b",
        "args": [],
        "exitCodes": [
          0
        ],
        "setVariables": []
      },
      {
        "exitCode": 0,
        "stdout": "",
        "stderr": " Network flatten_default  Creating\n Network flatten_default  Created\n Container flatten-redpanda-1  Creating\n Container flatten-redpanda-1  Created\n Container redpanda-console  Creating\n Container redpanda-console  Created\n Container flatten-redpanda-1  Starting\n Container flatten-redpanda-1  Started\n Container redpanda-console  Starting\n Container redpanda-console  Started",
        "result": "PASS",
        "resultDescription": "Executed command.",
        "action": "runShell",
        "command": "docker compose up -d",
        "id": "1d1a8653-c5c3-44cc-8f83-46be19a1d927",
        "args": [],
        "exitCodes": [
          0
        ],
        "setVariables": []
      },
      {
        "exitCode": 1,
        "stdout": "",
        "stderr": "profile \"flatten\" already exists",
        "result": "FAIL",
        "resultDescription": "Returned exit code 1. Expected one of [0]",
        "action": "runShell",
        "command": "rpk profile create flatten --from-profile profile.yml",
        "id": "4eaf1c00-4cf2-43a0-97f2-180bc744f047",
        "args": [],
        "exitCodes": [
          0
        ],
        "setVariables": []
      },
      {
        "exitCode": 0,
        "stdout": "TOPIC  STATUS\nsrc    OK\nsink   OK",
        "stderr": "",
        "result": "PASS",
        "resultDescription": "Executed command.",
        "action": "runShell",
        "command": "rpk topic create src sink",
        "id": "6c01f61d-0678-4b26-bf76-445b9abc9450",
        "args": [],
        "exitCodes": [
          0
        ],
        "setVariables": []
      },
      {
        "exitCode": 0,
        "stdout": "build successful\ndeploy your transform to a topic:\n\trpk transform deploy",
        "stderr": "",
        "result": "PASS",
        "resultDescription": "Executed command.",
        "action": "runShell",
        "command": "rpk transform build",
        "id": "fa1be6df-89c7-4d21-887d-c4ff1e838746",
        "args": [],
        "exitCodes": [
          0
        ],
        "setVariables": []
      },
      {
        "exitCode": 0,
        "stdout": "transform \"flatten\" deployed.",
        "stderr": "",
        "result": "PASS",
        "resultDescription": "Executed command.",
        "action": "runShell",
        "command": "rpk transform deploy --input-topic=src --output-topic=sink --var 'RP_FLATTEN_DELIM=.'",
        "id": "7c5941ba-5529-48a3-98d0-b897dcb47eaa",
        "args": [],
        "exitCodes": [
          0
        ],
        "setVariables": []
      },
      {
        "result": "PASS",
        "resultDescription": "Waited.",
        "action": "wait",
        "duration": 10000,
        "id": "bb61e1ee-317e-46c0-9e85-e47aff4451c9"
      },
      {
        "exitCode": 0,
        "stdout": "Prepared Message: eyJtZXNzYWdlIjoic3VjY2VzcyIsInRpbWVzdGFtcCI6MTcwNzc0Mzk0MywiaXNzX3Bvc2l0aW9uIjp7ImxhdGl0dWRlIjoiLTI4LjU3MjMiLCJsb25naXR1ZGUiOiItMTQ5LjQ2MTIifX0K\nspawn rpk topic produce src\r\n^CScript completed.",
        "stderr": "",
        "result": "PASS",
        "resultDescription": "Executed command.",
        "action": "runShell",
        "command": "sh ../../setup-tests/tools/rpk-produce.sh",
        "args": [
          "'{\"message\": \"success\", \"timestamp\": 1707743943,\"iss_position\": {\"latitude\": \"-28.5723\", \"longitude\": \"-149.4612\"}}'"
        ],
        "id": "1f7117a7-d0f1-4209-abdc-ea8327ca50ab",
        "exitCodes": [
          0
        ],
        "setVariables": []
      },
      {
        "exitCode": 0,
        "stdout": "{\n  \"topic\": \"sink\",\n  \"value\": \"{\\n  \\\"message\\\": \\\"success\\\"  \\\"timestamp\\\": 1.707743943e+09  \\\"iss_position.latitude\\\": \\\"-28.5723\\\",\\n  \\\"iss_position.longitude\\\": \\\"-149.4612\\\"\\n}\\n\",\n  \"timestamp\": 1711451079345,\n  \"partition\": 0,\n  \"offset\": 0\n}",
        "stderr": "",
        "result": "PASS",
        "resultDescription": "Executed command.",
        "action": "runShell",
        "command": "rpk topic consume sink --num 1",
        "output": "/position\\.longitude/",
        "id": "4d8ca914-37b2-4a64-a2a1-c442b9df713f",
        "args": [],
        "exitCodes": [
          0
        ],
        "setVariables": []
      },
      {
        "exitCode": 0,
        "stdout": "Deleted profile \"flatten\".\nThis was the selected profile; rpk will use defaults until a new profile is selected.",
        "stderr": "",
        "result": "PASS",
        "resultDescription": "Executed command.",
        "action": "runShell",
        "command": "rpk profile delete flatten",
        "id": "82cb81d0-c188-4139-ad14-c9a8136f9005",
        "args": [],
        "exitCodes": [
          0
        ],
        "setVariables": []
      },
      {
        "exitCode": 0,
        "stdout": "",
        "stderr": " Container redpanda-console  Stopping\n Container redpanda-console  Stopped\n Container redpanda-console  Removing\n Container redpanda-console  Removed\n Container flatten-redpanda-1  Stopping\n Container flatten-redpanda-1  Stopped\n Container flatten-redpanda-1  Removing\n Container flatten-redpanda-1  Removed\n Network flatten_default  Removing\n Network flatten_default  Removed",
        "result": "PASS",
        "resultDescription": "Executed command.",
        "action": "runShell",
        "command": "docker compose down -v",
        "id": "6ca0c665-964d-4bd9-abb9-8d348b506d99",
        "args": [],
        "exitCodes": [
          0
        ],
        "setVariables": []
      }
    ],
    "file": "/Users/jakecahill/Documents/redpanda-labs/data-transforms/flatten/README.adoc"
  }
]